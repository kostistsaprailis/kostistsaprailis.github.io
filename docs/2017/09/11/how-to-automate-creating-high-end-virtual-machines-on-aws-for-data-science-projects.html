
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="" />

  <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,400;0,700;1,400&family=Source+Sans+Pro:ital,wght@0,300;0,400;0,700;1,400&display=swap" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="https://tsaprailis.com/theme/stylesheet/style.min.css">


    <link id="pygments-light-theme" rel="stylesheet" type="text/css"
          href="https://tsaprailis.com/theme/pygments/github.min.css">


  <link rel="stylesheet" type="text/css" href="https://tsaprailis.com/theme/font-awesome/css/fontawesome.css">
  <link rel="stylesheet" type="text/css" href="https://tsaprailis.com/theme/font-awesome/css/brands.css">
  <link rel="stylesheet" type="text/css" href="https://tsaprailis.com/theme/font-awesome/css/solid.css">




    <link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/images/favicon.ico" type="image/x-icon">

  


 

<meta name="author" content="Kostis Tsaprailis" />
<meta name="description" content="This is a log of my findings while trying to automate the creation of Virtual Machines on Amazon Web Services." />
<meta name="keywords" content="devops, terraform, AWS, data science">


  <meta property="og:site_name" content="Kostis Tsaprailis"/>
  <meta property="og:title" content="How to automate creating high end virtual machines on AWS for data science projects"/>
  <meta property="og:description" content="This is a log of my findings while trying to automate the creation of Virtual Machines on Amazon Web Services."/>
  <meta property="og:locale" content="en_US"/>
  <meta property="og:url" content="https://tsaprailis.com/2017/09/11/how-to-automate-creating-high-end-virtual-machines-on-aws-for-data-science-projects.html"/>
  <meta property="og:type" content="article"/>
  <meta property="article:published_time" content="2017-09-11 00:00:00+03:00"/>
  <meta property="article:modified_time" content=""/>
  <meta property="article:author" content="https://tsaprailis.com/author/kostis-tsaprailis.html">
  <meta property="article:section" content="tutorial"/>
  <meta property="article:tag" content="devops"/>
  <meta property="article:tag" content="terraform"/>
  <meta property="article:tag" content="AWS"/>
  <meta property="article:tag" content="data science"/>
  <meta property="og:image" content="/images/profile.png">

  <title>Kostis Tsaprailis &ndash; How to automate creating high end virtual machines on AWS for data science projects</title>

</head>
<body class="light-theme">
  <aside>
    <div>
      <a href="https://tsaprailis.com/">
        <img src="/images/profile.png" alt="" title="">
      </a>

      <h1>
        <a href="https://tsaprailis.com/"></a>
      </h1>

<p>Full Stack Breaker</p>


      <ul class="social">
          <li>
            <a  class="sc-twitter" href="https://twitter.com/ktsaprailis" target="_blank">
              <i class="fab fa-twitter"></i>
            </a>
          </li>
          <li>
            <a  class="sc-github" href="https://github.com/kostistsaprailis/" target="_blank">
              <i class="fab fa-github"></i>
            </a>
          </li>
          <li>
            <a  class="sc-linkedin" href="https://www.linkedin.com/in/konstantinostsaprailis/" target="_blank">
              <i class="fab fa-linkedin"></i>
            </a>
          </li>
      </ul>
    </div>

  </aside>
  <main>


<article class="single">
  <header>
      
    <h1 id="how-to-automate-creating-high-end-virtual-machines-on-aws-for-data-science-projects">How to automate creating high end virtual machines on AWS for data science projects</h1>
    <p>
      Posted on Mon 11 September 2017 in <a href="https://tsaprailis.com/category/tutorial.html">tutorial</a>

    </p>
  </header>


  <div>
    <p>This is a log of my findings while trying to automate the creation of Virtual Machines on Amazon Web Services.</p>
<p>Last year I started my MSc in Data Science. Anyone who has been on a similar position knows that running Machine Learning algorithms is very resource intensive. You can either spend hours waiting for an algorithm to finish on a regular PC/laptop, spend about $1000 on buying a high-end PC or get a VM on the cloud providers.</p>
<p>Both of the latter two options have their pros and cons that may suit one's needs. I will only focus on the last option here i.e. deploying high end VM on AWS.</p>
<p>The simple way of creating a virtual machine is by using the provider website. AWS has a web console interface for creating resources but it can get time consuming and repetitive to use the interface for one time machines. Furthermore there's a hassle with installing the required software packages everytime (a process called configuration), getting the machine details (public DNS name, public IP etc)</p>
<p>I'll be using the <a href="https://www.terraform.io/">Terraform</a> orchestration tool to quickly set up and configure the required Virtual Machine server as fast as possible to minimize time lost on the trivial activities and maximize the value for the money paid for the server. Finally once I'll be finished with the project I can destroy the Virtual Machine as to stop getting charged for it.</p>
<h3>Tech Stack</h3>
<p>What will be required:</p>
<ul>
<li>The <a href="https://www.terraform.io/">Terraform</a> tool. As mentioned this is the basic tool that will be used for provisioning the Virtual Machines.</li>
<li>A <a href="https://en.wikipedia.org/wiki/Unix_shell">Unix shell</a>. This guide can probably work with the <a href="https://msdn.microsoft.com/en-us/commandline/wsl/about">Windows bash</a> but I haven't tested it.</li>
<li>An <a href="https://aws.amazon.com/">Amazon Web Services</a> account.</li>
</ul>
<h3>What is Infrastructure As Code and what is Terraform?</h3>
<p>Infrastructure as code is a new DevOps philosophy where the application infrastructure is no longer created by hand but programmatically. The benefits are numerous including but not limited to:
- Speed of deployment
- Version Control of Infrastructure
- Engineer agnostic infrastructure (no single point of failure/no single person to bug)
- Better lifetime management (automatic scale up/down, healing)
- Cross-provider deployment with minimal changes</p>
<p>Terraform is a tool that helps in this direction. It is an open source tool developed by <a href="https://www.hashicorp.com/">Hashicorp</a>.</p>
<p>This tool allows you to write the final state that you wish your infrastructure to have and terraform applies those changes for you.</p>
<p>You can provision VMs, create subnets, assign security groups and pretty much perform any action that any cloud provider allows.</p>
<p>Terraform support a wide range of <a href="https://www.terraform.io/docs/providers/index.html">providers</a> including the big 3 ones AWS, GCP, Microsoft Azure.</p>
<h3>Installing Terraform</h3>
<p>Terraform is written in Go and is provided as a binary for the major OSs but can also be compiled from <a href="https://github.com/hashicorp/terraform">source code</a>.</p>
<p>The binary can be downloaded from the Terraform <a href="https://www.terraform.io/downloads.html">site</a> and does not require any installation. We just need to set it to the path variable (for Linux/macOS instructionscan be found <a href="https://stackoverflow.com/questions/14637979/how-to-permanently-set-path-on-linux">here</a> and for Windows <a href="https://stackoverflow.com/questions/1618280/where-can-i-set-path-to-make-exe-on-windows">here</a>) so that it is accessible from our system in any path.</p>
<p>After we have this has finished we can confirm that it is ready to be used by running the terraform command and we should get something like the following:</p>
<div class="highlight"><pre><span></span><code><span class="err">$</span> <span class="n">terraform</span>
<span class="n">Usage</span><span class="p">:</span> <span class="n">terraform</span> <span class="p">[</span><span class="o">--</span><span class="n">version</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">help</span><span class="p">]</span> <span class="o">&lt;</span><span class="n">command</span><span class="o">&gt;</span> <span class="p">[</span><span class="n">args</span><span class="p">]</span>

<span class="n">The</span> <span class="n">available</span> <span class="n">commands</span> <span class="k">for</span> <span class="n">execution</span> <span class="n">are</span> <span class="n">listed</span> <span class="n">below</span><span class="o">.</span>
<span class="n">The</span> <span class="n">most</span> <span class="n">common</span><span class="p">,</span> <span class="n">useful</span> <span class="n">commands</span> <span class="n">are</span> <span class="n">shown</span> <span class="n">first</span><span class="p">,</span> <span class="n">followed</span> <span class="n">by</span>
<span class="n">less</span> <span class="n">common</span> <span class="ow">or</span> <span class="n">more</span> <span class="n">advanced</span> <span class="n">commands</span><span class="o">.</span> <span class="n">If</span> <span class="n">you</span><span class="s1">&#39;re just getting</span>
<span class="n">started</span> <span class="k">with</span> <span class="n">Terraform</span><span class="p">,</span> <span class="n">stick</span> <span class="k">with</span> <span class="n">the</span> <span class="n">common</span> <span class="n">commands</span><span class="o">.</span> <span class="n">For</span> <span class="n">the</span>
<span class="n">other</span> <span class="n">commands</span><span class="p">,</span> <span class="n">please</span> <span class="n">read</span> <span class="n">the</span> <span class="n">help</span> <span class="ow">and</span> <span class="n">docs</span> <span class="n">before</span> <span class="n">usage</span><span class="o">.</span>

<span class="n">Common</span> <span class="n">commands</span><span class="p">:</span>
    <span class="n">apply</span>              <span class="n">Builds</span> <span class="ow">or</span> <span class="n">changes</span> <span class="n">infrastructure</span>
    <span class="n">console</span>            <span class="n">Interactive</span> <span class="n">console</span> <span class="k">for</span> <span class="n">Terraform</span> <span class="n">interpolations</span>
    <span class="n">destroy</span>            <span class="n">Destroy</span> <span class="n">Terraform</span><span class="o">-</span><span class="n">managed</span> <span class="n">infrastructure</span>
    <span class="n">env</span>                <span class="n">Environment</span> <span class="n">management</span>
    <span class="n">fmt</span>                <span class="n">Rewrites</span> <span class="n">config</span> <span class="n">files</span> <span class="n">to</span> <span class="n">canonical</span> <span class="nb">format</span>
    <span class="n">get</span>                <span class="n">Download</span> <span class="ow">and</span> <span class="n">install</span> <span class="n">modules</span> <span class="k">for</span> <span class="n">the</span> <span class="n">configuration</span>
    <span class="n">graph</span>              <span class="n">Create</span> <span class="n">a</span> <span class="n">visual</span> <span class="n">graph</span> <span class="n">of</span> <span class="n">Terraform</span> <span class="n">resources</span>
    <span class="kn">import</span>             <span class="nn">Import</span> <span class="n">existing</span> <span class="n">infrastructure</span> <span class="n">into</span> <span class="n">Terraform</span>
    <span class="n">init</span>               <span class="n">Initialize</span> <span class="n">a</span> <span class="n">new</span> <span class="ow">or</span> <span class="n">existing</span> <span class="n">Terraform</span> <span class="n">configuration</span>
    <span class="n">output</span>             <span class="n">Read</span> <span class="n">an</span> <span class="n">output</span> <span class="kn">from</span> <span class="nn">a</span> <span class="n">state</span> <span class="n">file</span>
    <span class="n">plan</span>               <span class="n">Generate</span> <span class="ow">and</span> <span class="n">show</span> <span class="n">an</span> <span class="n">execution</span> <span class="n">plan</span>
    <span class="n">push</span>               <span class="n">Upload</span> <span class="n">this</span> <span class="n">Terraform</span> <span class="n">module</span> <span class="n">to</span> <span class="n">Atlas</span> <span class="n">to</span> <span class="n">run</span>
    <span class="n">refresh</span>            <span class="n">Update</span> <span class="n">local</span> <span class="n">state</span> <span class="n">file</span> <span class="n">against</span> <span class="n">real</span> <span class="n">resources</span>
    <span class="n">show</span>               <span class="n">Inspect</span> <span class="n">Terraform</span> <span class="n">state</span> <span class="ow">or</span> <span class="n">plan</span>
    <span class="n">taint</span>              <span class="n">Manually</span> <span class="n">mark</span> <span class="n">a</span> <span class="n">resource</span> <span class="k">for</span> <span class="n">recreation</span>
    <span class="n">untaint</span>            <span class="n">Manually</span> <span class="n">unmark</span> <span class="n">a</span> <span class="n">resource</span> <span class="k">as</span> <span class="n">tainted</span>
    <span class="n">validate</span>           <span class="n">Validates</span> <span class="n">the</span> <span class="n">Terraform</span> <span class="n">files</span>
    <span class="n">version</span>            <span class="n">Prints</span> <span class="n">the</span> <span class="n">Terraform</span> <span class="n">version</span>

<span class="n">All</span> <span class="n">other</span> <span class="n">commands</span><span class="p">:</span>
    <span class="n">debug</span>              <span class="n">Debug</span> <span class="n">output</span> <span class="n">management</span> <span class="p">(</span><span class="n">experimental</span><span class="p">)</span>
    <span class="n">force</span><span class="o">-</span><span class="n">unlock</span>       <span class="n">Manually</span> <span class="n">unlock</span> <span class="n">the</span> <span class="n">terraform</span> <span class="n">state</span>
    <span class="n">state</span>              <span class="n">Advanced</span> <span class="n">state</span> <span class="n">management</span>
</code></pre></div>

<p>Now we can move on the using the tool.</p>
<h3>Setting up the AWS account</h3>
<p>This is a step that is not specific to this project but rather it's something that needs to be configured whenever a new AWS account is set up.
When we create a new account with Amazon, the default account we are given has root access to any action. Similarly with the linux root user we do not want to be using this account for the day-to-day actions, so we need to create a new user.</p>
<p>We navigate to the <a href="https://console.aws.amazon.com/iam/home#">Identity and Access Management (IAM)</a> page, click on <code>Users</code>, then the <code>Add user</code> button. We provide the User name, and click the Programmatic access checkbox so that an access key ID and a secret access key will be generated.</p>
<p>Clicking next we are asked to provide a Security Group that this User will belong to. Security Groups are the main way to provide permission and restrict access to specific actions required. For this purpose of this project we will give the <code>AdministratorAccess</code> permission to this user, however when used in a professional setting it is advised to only allow permissions that a user needs (like AmazonEC2FullAccess if a user will only be creating EC2 instances).</p>
<p>Finishing the review step Amazon will provide the Access key ID and Secret access key. We will provide these to terraform to grant it access to create the resources for us. We need to keep these as they are only provided once and cannot be retrieved (however we can always create a new pair).</p>
<p>The secure way to store these credentials as recommended by <a href="https://aws.amazon.com/blogs/security/a-new-and-standardized-way-to-manage-credentials-in-the-aws-sdks/">Amazon</a> is keeping them in a hidden folder under a file called <code>credentials</code>. This file can be accessed by terraform to retrieve them.</p>
<div class="highlight"><pre><span></span><code>$ <span class="nb">cd</span>
$ mkdir .aws
$ <span class="nb">cd</span> .aws
~/.aws$ vim credentials
</code></pre></div>

<p>We add the following to the credentials file after replacing <code>ACCESS_KEY</code> and <code>SECRET_KEY</code> and then save it:</p>
<div class="highlight"><pre><span></span><code><span class="k">[default]</span><span class="w"></span>
<span class="na">aws_access_key_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">ACCESS_KEY</span><span class="w"></span>
<span class="na">aws_secret_access_key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">SECRET_KEY</span><span class="w"></span>
</code></pre></div>

<p>We also restrict access to this file only to the current user:</p>
<div class="highlight"><pre><span></span><code>~/.aws$ chmod 600 credentials 
</code></pre></div>

<h4>Setting up a key pair</h4>
<p>The next step is to create a key pair so that terraform can access the newly created VMS. Notice that this is different than the above credentials. The Amazon credentials are for accessing and allowing the AWS service to create the resources required, while this key pair will be used for accessing the newly created Virtual Machines. </p>
<p>Log into the <a href="https://eu-west-1.console.aws.amazon.com/ec2/v2/home?region=eu-west-1#KeyPairs:sort=keyName">AWS console</a> and select <code>Create Key Pair</code>. Add a name (I name mine mac-ssh) and click <code>Create</code>. AWS will create a .pem file and download it locally. </p>
<p>Move this file to the <code>.aws</code> directory. Notice the name of the file to move will be different based on the name provided while creating the file.</p>
<div class="highlight"><pre><span></span><code><span class="o">~/</span><span class="n">Downloads</span><span class="o">$</span><span class="w"> </span><span class="n">cd</span><span class="w"> </span><span class="o">~/</span><span class="n">Downloads</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">mv</span><span class="w"> </span><span class="n">mac</span><span class="o">-</span><span class="n">ssh</span><span class="o">.</span><span class="n">pem</span><span class="w"> </span><span class="o">../.</span><span class="n">aws</span><span class="o">/</span><span class="w"></span>
</code></pre></div>

<p>Then restrict the permissions:</p>
<div class="highlight"><pre><span></span><code>$ <span class="nb">cd</span> ../.aws <span class="o">&amp;&amp;</span> chmod <span class="m">400</span> mac-ssh.pem
</code></pre></div>

<p>Now we ready to use this key pair either via a direct ssh to our instances, or for terraform to use this to connect to the instances and run some scripts.</p>
<h3>Provisioning VMs &amp; Configuring Them</h3>
<p>So now that everything is set up, we can move to actually creating the virtual machines.</p>
<p>Let's create a new folder called <code>terraform</code>.</p>
<div class="highlight"><pre><span></span><code>$ mkdir terraform
$ <span class="nb">cd</span> terraform
</code></pre></div>

<p>In that folder we will create two files one called <code>main.tf</code> and the second <code>configure.sh</code>. The first file is the terraform specific code that handles the creation of the Virtual Machine. The second file is a <a href="https://en.wikipedia.org/wiki/Shell_script">bash script</a> that will be run on the created machine to configure it with the software required.</p>
<p>So this is the <code>main.tf</code> file:</p>
<div class="highlight"><pre><span></span><code>provider &quot;aws&quot; {
    region = &quot;eu-west-1&quot;
    version = &quot;~&gt; 0.1&quot;
}

resource &quot;aws_security_group&quot; &quot;jupyter_notebook_sg&quot; {
    name = &quot;jupyter_notebook_sg&quot;
    # Open up incoming ssh port
    ingress {
        from_port = 22
        to_port = 22
        protocol = &quot;tcp&quot;
        cidr_blocks = [&quot;0.0.0.0/0&quot;]
    }

    # Open up incoming traffic to port 8888 used by Jupyter Notebook
    ingress {
        from_port   = 8888
        to_port     = 8888
        protocol    = &quot;tcp&quot;
        cidr_blocks = [&quot;0.0.0.0/0&quot;]
    }

    # Open up outbound internet access
    egress {
        from_port   = 0
        to_port     = 0
        protocol    = &quot;-1&quot;
        cidr_blocks = [&quot;0.0.0.0/0&quot;]
    }
}

resource &quot;aws_instance&quot; &quot;Node&quot; {
    count = 1
    ami = &quot;ami-a8d2d7ce&quot;
    instance_type = &quot;m4.xlarge&quot;
    key_name = &quot;mac-ssh&quot;
    tags {
        Name = &quot;Jupyter Notebook Meganode&quot;
    }
    vpc_security_group_ids = [&quot;<span class="cp">${</span><span class="n">aws_security_group</span><span class="o">.</span><span class="n">jupyter_notebook_sg</span><span class="o">.</span><span class="n">id</span><span class="cp">}</span>&quot;]

    provisioner &quot;file&quot; {
        source      = &quot;configure.sh&quot;
        destination = &quot;/tmp/configure.sh&quot;

        connection {
            type     = &quot;ssh&quot;
            user     = &quot;ubuntu&quot;
            private_key = &quot;<span class="cp">${</span><span class="n">file</span><span class="p">(</span><span class="s2">&quot;~/.aws/mac-ssh.pem&quot;</span><span class="p">)</span><span class="cp">}</span>&quot;
        }
    }

    provisioner &quot;remote-exec&quot; {
        inline = [
            &quot;chmod +x /tmp/configure.sh&quot;,
            &quot;/tmp/configure.sh&quot;,
        ]
        connection {
            type     = &quot;ssh&quot;
            user     = &quot;ubuntu&quot;
            private_key = &quot;<span class="cp">${</span><span class="n">file</span><span class="p">(</span><span class="s2">&quot;~/.aws/mac-ssh.pem&quot;</span><span class="p">)</span><span class="cp">}</span>&quot;
        }

    }

}

output &quot;node_dns_name&quot; {
    value = &quot;<span class="cp">${</span><span class="n">aws_instance</span><span class="o">.</span><span class="n">Node</span><span class="o">.</span><span class="n">public_dns</span><span class="cp">}</span>&quot;
}
</code></pre></div>

<p>And this the <code>configure.sh</code>:</p>
<div class="highlight"><pre><span></span><code>!#/bin/bash

sudo apt-get update
sudo apt-get -y install git
sudo apt-get -y install vim
sudo apt-get -y install python3 python3-pip python3-dev
sudo -H pip3 install jupyter

mkdir ~/.jupyter
echo &quot;c.NotebookApp.allow_origin = &#39;*&#39;
c.NotebookApp.ip = &#39;0.0.0.0&#39;&quot; | sudo tee /home/ubuntu/.jupyter/jupyter_notebook_config.py
</code></pre></div>

<hr>
<p>Let's break down the terraform blueprint. We start by defining the provider:</p>
<div class="highlight"><pre><span></span><code><span class="n">provider</span><span class="w"> </span><span class="s">&quot;aws&quot;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">region</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;eu-west-1&quot;</span><span class="w"></span>
<span class="w">    </span><span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;~&gt; 0.1&quot;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<p>Terraform defines these blocks contained within the curly braces. The first word is usually a reserved word that defines something in this case the provider that will be used in this blueprint. The next word again is a reserved word but it's provider specific. Blocks can have a third word which is usually an identifier, like a variable to reference the specific resource whithin another block.
Regarding the first block, the core Terraform software is provider agnostic so each blueprint needs to define the provider on which the resources will be created at. You can find all the supported providers <a href="https://www.terraform.io/docs/providers">here</a>. You can find all the AWS specific details <a href="https://www.terraform.io/docs/providers/aws/index.html">here</a>.
The region value is basically the AWS datacenter on which the Virtaul Machine will be created at. You can find all available regions <a href="https://docs.aws.amazon.com/general/latest/gr/rande.html#ec2_region">here</a>. It's generally advised to pick the one that is closest to you as to minimize the response time between your PC and the Virtual Machine.
Finally the version value is referring to the version of the AWS plugin that will be used.</p>
<p>The next block defines the first resource that will be created. </p>
<div class="highlight"><pre><span></span><code>resource &quot;aws_security_group&quot; &quot;jupyter_notebook_sg&quot; {
    name = &quot;jupyter_notebook_sg&quot;
    # Open up incoming ssh port
    ingress {
        from_port = 22
        to_port = 22
        protocol = &quot;tcp&quot;
        cidr_blocks = [&quot;0.0.0.0/0&quot;]
    }

    # Open up incoming traffic to port 8888 used by Jupyter Notebook
    ingress {
        from_port   = 8888
        to_port     = 8888
        protocol    = &quot;tcp&quot;
        cidr_blocks = [&quot;0.0.0.0/0&quot;]
    }

    # Open up outbound internet access
    egress {
        from_port   = 0
        to_port     = 0
        protocol    = &quot;-1&quot;
        cidr_blocks = [&quot;0.0.0.0/0&quot;]
    }
}
</code></pre></div>

<p>It can be considered like a virtual firewall that allows or restricts incoming and outgoing traffic to VMs. You can assign more than one security groups in a VM. In this can we have created three rules. We have allowed incoming traffic (ingress) to ports 22 and 8888 which are used for ssh access and by jupyter notebook respectively from any IP address. The last rule allows outgoing (egress) traffic from all IPs, to all ports, with any protocol.
Finally note that as mentioned in the previous paragraph, the block declaration starts with the <code>resource</code> word, followed by the type of resource the block defines (here <code>aws_security_group</code>), and we give the name <code>jupyter_notebook_sg</code> to this resource. We will see how we use this in the next block. You can read more about security groups <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-network-security.html">here</a>.</p>
<p>The third block is the one that defines the Virtual Machine resource.</p>
<div class="highlight"><pre><span></span><code>resource &quot;aws_instance&quot; &quot;Node&quot; {
    count = 1
    ami = &quot;ami-a8d2d7ce&quot;
    instance_type = &quot;m4.xlarge&quot;
    key_name = &quot;mac-ssh&quot;
    tags {
        Name = &quot;Jupyter Notebook Meganode&quot;
    }
    vpc_security_group_ids = [&quot;<span class="cp">${</span><span class="n">aws_security_group</span><span class="o">.</span><span class="n">jupyter_notebook_sg</span><span class="o">.</span><span class="n">id</span><span class="cp">}</span>&quot;]

    provisioner &quot;file&quot; {
        source      = &quot;configure.sh&quot;
        destination = &quot;/tmp/configure.sh&quot;

        connection {
            type     = &quot;ssh&quot;
            user     = &quot;ubuntu&quot;
            private_key = &quot;<span class="cp">${</span><span class="n">file</span><span class="p">(</span><span class="s2">&quot;~/.aws/mac-ssh.pem&quot;</span><span class="p">)</span><span class="cp">}</span>&quot;
        }
    }

    provisioner &quot;remote-exec&quot; {
        inline = [
            &quot;chmod +x /tmp/configure.sh&quot;,
            &quot;/tmp/configure.sh&quot;,
        ]
        connection {
            type     = &quot;ssh&quot;
            user     = &quot;ubuntu&quot;
            private_key = &quot;<span class="cp">${</span><span class="n">file</span><span class="p">(</span><span class="s2">&quot;~/.aws/mac-ssh.pem&quot;</span><span class="p">)</span><span class="cp">}</span>&quot;
        }

    }

}
</code></pre></div>

<p>As above, we define the resource type we want to create (<code>aws_instance</code>) and we give the name <code>Node</code> to this resource. Notice that this name is only used by Terraform it is not something that is defined in AWS.</p>
<p>The first value that need defining is the <code>ami</code> (<code>count</code> is pretty self explanatory so I skip it). This stands for <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/AMIs.html">Amazon Machine Image</a>. Basically it's the image of the Operating System that will be installed on the created VM. The way to find this ami value is described by Amazon <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/finding-an-ami.html#finding-an-ami-console">here</a>. There are countless images to choose from with many software packages preinstalled to choose from. However this can get a bit chaotic is you are just looking for a simple generic OS image. I have picked the AMI for the ubuntu 16.04 server image.
I prefer to find the ami from the <a href="https://eu-west-1.console.aws.amazon.com/ec2/v2/home?region=eu-west-1#LaunchInstanceWizard:">launch EC2 instance wizard</a> that AWS provides, it's clearer for the base OS images.</p>
<p>Next we define the <code>instance_type</code>. This is the type of Virtual Machine that will be created. You can find all the different instance types <a href="https://aws.amazon.com/ec2/instance-types/">here</a> along with the <a href="https://aws.amazon.com/ec2/pricing/on-demand/">pricing</a>. The one I picked here is the m4.xlarge instance which has 4 virtual CPUs, 16 GB of RAM and costs about $0.2 per hour at the time of writing, however this price is usually variant on the region.
<code>Tags</code> are AWS specific details, here we provide a <code>Name</code> for the VM.</p>
<p>Next we provide a list of <code>vpc_security_group_ids</code> which are the AWS ids Security Groups, we have only provided one in this case, the one we created.
Finally the last two blocks are using another Terraform block type, the provisioner. <a href="https://www.terraform.io/docs/provisioners/index.html">Provisioners</a> are used to execute scripts on a local or remote machine as part of resource creation or destruction. Provisioners can be used to bootstrap a resource, cleanup before destroy, run configuration management, etc.</p>
<p>The first provisioner is a file provisioner which copies files to the resource (we use it to copy the <code>configure.sh</code> script we created), while the second one <code>remote-exec</code> runs a shell command on the VM once it has been created (we make the script executable and then run it). Both provisioner use another block called <code>connection</code> which defines the connection type and the credentials required to reach the VM.</p>
<p>Finally Terraform defines a way to extract details from the created resources using the <code>output</code> block.</p>
<div class="highlight"><pre><span></span><code>output &quot;node_dns_name&quot; {
    value = &quot;<span class="cp">${</span><span class="n">aws_instance</span><span class="o">.</span><span class="n">Node</span><span class="o">.</span><span class="n">public_dns</span><span class="cp">}</span>&quot;
}
</code></pre></div>

<p>We will use this to output the VM public DNS name so that we can access the machine easily.</p>
<p>This was a pretty rough introduction to the basics of Terraform that were used but I urge you to read the official <a href="https://www.terraform.io/docs/index.html">documentation</a> to learn more about it.</p>
<p>The configuration script is really basic:</p>
<div class="highlight"><pre><span></span><code>!#/bin/bash

sudo apt-get update
sudo apt-get -y install git
sudo apt-get -y install vim
sudo apt-get -y install python3 python3-pip python3-dev
sudo -H pip3 install jupyter

mkdir ~/.jupyter
echo &quot;c.NotebookApp.allow_origin = &#39;*&#39;
c.NotebookApp.ip = &#39;0.0.0.0&#39;&quot; | sudo tee /home/ubuntu/.jupyter/jupyter_notebook_config.py
</code></pre></div>

<p>We run a system update, then install git, vim, python3 and python3 pip, and the jupyter notebook. The last 3 lines are of interest as they create the jupyter notebook specific configuration file, and assigns values to <code>allow_origin</code> and <code>ip</code> which allow access to the notebook from any server. 
Of course you can add any other packages you which your VM to have on this script.</p>
<hr>
<p>Now that the blueprint is explained we are ready to run it. The first time we run terraform with any blueprint we to initialize it. We do that by running:</p>
<div class="highlight"><pre><span></span><code>$ terraform init
</code></pre></div>

<p>This way Terraform will try to find the relevant provider plugin required for this blueprint and download it.</p>
<p>And now we are ready to create the VM. Let's start by running <code>terraform plan</code>:</p>
<div class="highlight"><pre><span></span><code>$ terraform plan
Refreshing Terraform state <span class="k">in</span>-memory prior to plan...
The refreshed state will be used to calculate this plan, but will not be
persisted to <span class="nb">local</span> or remote state storage.

The Terraform execution plan has been generated and is shown below.
Resources are shown <span class="k">in</span> alphabetical order <span class="k">for</span> quick scanning. Green resources
will be created <span class="o">(</span>or destroyed and <span class="k">then</span> created <span class="k">if</span> an existing resource
exists<span class="o">)</span>, yellow resources are being changed <span class="k">in</span>-place, and red resources
will be destroyed. Cyan entries are data sources to be read.

Note: You didn<span class="s1">&#39;t specify an &quot;-out&quot; parameter to save this plan, so when</span>
<span class="s1">&quot;apply&quot; is called, Terraform can&#39;</span>t guarantee this is what will execute.

  + aws_instance.Node
      ami:                          <span class="s2">&quot;ami-785db401&quot;</span>
      associate_public_ip_address:  <span class="s2">&quot;&lt;computed&gt;&quot;</span>
      availability_zone:            <span class="s2">&quot;&lt;computed&gt;&quot;</span>
      ebs_block_device.#:           <span class="s2">&quot;&lt;computed&gt;&quot;</span>
      ephemeral_block_device.#:     <span class="s2">&quot;&lt;computed&gt;&quot;</span>
      instance_state:               <span class="s2">&quot;&lt;computed&gt;&quot;</span>
      instance_type:                <span class="s2">&quot;t2.micro&quot;</span>
      ipv6_address_count:           <span class="s2">&quot;&lt;computed&gt;&quot;</span>
      ipv6_addresses.#:             <span class="s2">&quot;&lt;computed&gt;&quot;</span>
      key_name:                     <span class="s2">&quot;mac-ssh&quot;</span>
      network_interface.#:          <span class="s2">&quot;&lt;computed&gt;&quot;</span>
      network_interface_id:         <span class="s2">&quot;&lt;computed&gt;&quot;</span>
      placement_group:              <span class="s2">&quot;&lt;computed&gt;&quot;</span>
      primary_network_interface_id: <span class="s2">&quot;&lt;computed&gt;&quot;</span>
      private_dns:                  <span class="s2">&quot;&lt;computed&gt;&quot;</span>
      private_ip:                   <span class="s2">&quot;&lt;computed&gt;&quot;</span>
      public_dns:                   <span class="s2">&quot;&lt;computed&gt;&quot;</span>
      public_ip:                    <span class="s2">&quot;&lt;computed&gt;&quot;</span>
      root_block_device.#:          <span class="s2">&quot;&lt;computed&gt;&quot;</span>
      security_groups.#:            <span class="s2">&quot;&lt;computed&gt;&quot;</span>
      source_dest_check:            <span class="s2">&quot;true&quot;</span>
      subnet_id:                    <span class="s2">&quot;&lt;computed&gt;&quot;</span>
      tags.%:                       <span class="s2">&quot;1&quot;</span>
      tags.Name:                    <span class="s2">&quot;Jupyter Notebook Meganode&quot;</span>
      tenancy:                      <span class="s2">&quot;&lt;computed&gt;&quot;</span>
      volume_tags.%:                <span class="s2">&quot;&lt;computed&gt;&quot;</span>
      vpc_security_group_ids.#:     <span class="s2">&quot;&lt;computed&gt;&quot;</span>

  + aws_security_group.jupyter_notebook_sg
      description:                           <span class="s2">&quot;Managed by Terraform&quot;</span>
      egress.#:                              <span class="s2">&quot;1&quot;</span>
      egress.482069346.cidr_blocks.#:        <span class="s2">&quot;1&quot;</span>
      egress.482069346.cidr_blocks.0:        <span class="s2">&quot;0.0.0.0/0&quot;</span>
      egress.482069346.from_port:            <span class="s2">&quot;0&quot;</span>
      egress.482069346.ipv6_cidr_blocks.#:   <span class="s2">&quot;0&quot;</span>
      egress.482069346.prefix_list_ids.#:    <span class="s2">&quot;0&quot;</span>
      egress.482069346.protocol:             <span class="s2">&quot;-1&quot;</span>
      egress.482069346.security_groups.#:    <span class="s2">&quot;0&quot;</span>
      egress.482069346.self:                 <span class="s2">&quot;false&quot;</span>
      egress.482069346.to_port:              <span class="s2">&quot;0&quot;</span>
      ingress.#:                             <span class="s2">&quot;2&quot;</span>
      ingress.2541437006.cidr_blocks.#:      <span class="s2">&quot;1&quot;</span>
      ingress.2541437006.cidr_blocks.0:      <span class="s2">&quot;0.0.0.0/0&quot;</span>
      ingress.2541437006.from_port:          <span class="s2">&quot;22&quot;</span>
      ingress.2541437006.ipv6_cidr_blocks.#: <span class="s2">&quot;0&quot;</span>
      ingress.2541437006.protocol:           <span class="s2">&quot;tcp&quot;</span>
      ingress.2541437006.security_groups.#:  <span class="s2">&quot;0&quot;</span>
      ingress.2541437006.self:               <span class="s2">&quot;false&quot;</span>
      ingress.2541437006.to_port:            <span class="s2">&quot;22&quot;</span>
      ingress.433339597.cidr_blocks.#:       <span class="s2">&quot;1&quot;</span>
      ingress.433339597.cidr_blocks.0:       <span class="s2">&quot;0.0.0.0/0&quot;</span>
      ingress.433339597.from_port:           <span class="s2">&quot;8888&quot;</span>
      ingress.433339597.ipv6_cidr_blocks.#:  <span class="s2">&quot;0&quot;</span>
      ingress.433339597.protocol:            <span class="s2">&quot;tcp&quot;</span>
      ingress.433339597.security_groups.#:   <span class="s2">&quot;0&quot;</span>
      ingress.433339597.self:                <span class="s2">&quot;false&quot;</span>
      ingress.433339597.to_port:             <span class="s2">&quot;8888&quot;</span>
      name:                                  <span class="s2">&quot;jupyter_notebook_sg&quot;</span>
      owner_id:                              <span class="s2">&quot;&lt;computed&gt;&quot;</span>
      vpc_id:                                <span class="s2">&quot;&lt;computed&gt;&quot;</span>


Plan: <span class="m">2</span> to add, <span class="m">0</span> to change, <span class="m">0</span> to destroy.
</code></pre></div>

<p>Terraform will output what resources will be created so that you can double check that everything is as required. Then we actually run the <code>terraform apply</code> and the resource creation begins:</p>
<div class="highlight"><pre><span></span><code>$ terraform apply
aws_security_group.jupyter_notebook_sg: Creating...
  description:                           <span class="s2">&quot;&quot;</span> <span class="o">=</span>&gt; <span class="s2">&quot;Managed by Terraform&quot;</span>
  egress.#:                              <span class="s2">&quot;&quot;</span> <span class="o">=</span>&gt; <span class="s2">&quot;1&quot;</span>
  egress.482069346.cidr_blocks.#:        <span class="s2">&quot;&quot;</span> <span class="o">=</span>&gt; <span class="s2">&quot;1&quot;</span>
  egress.482069346.cidr_blocks.0:        <span class="s2">&quot;&quot;</span> <span class="o">=</span>&gt; <span class="s2">&quot;0.0.0.0/0&quot;</span>
  egress.482069346.from_port:            <span class="s2">&quot;&quot;</span> <span class="o">=</span>&gt; <span class="s2">&quot;0&quot;</span>
  egress.482069346.ipv6_cidr_blocks.#:   <span class="s2">&quot;&quot;</span> <span class="o">=</span>&gt; <span class="s2">&quot;0&quot;</span>
  egress.482069346.prefix_list_ids.#:    <span class="s2">&quot;&quot;</span> <span class="o">=</span>&gt; <span class="s2">&quot;0&quot;</span>
  egress.482069346.protocol:             <span class="s2">&quot;&quot;</span> <span class="o">=</span>&gt; <span class="s2">&quot;-1&quot;</span>
  egress.482069346.security_groups.#:    <span class="s2">&quot;&quot;</span> <span class="o">=</span>&gt; <span class="s2">&quot;0&quot;</span>
  egress.482069346.self:                 <span class="s2">&quot;&quot;</span> <span class="o">=</span>&gt; <span class="s2">&quot;false&quot;</span>
  egress.482069346.to_port:              <span class="s2">&quot;&quot;</span> <span class="o">=</span>&gt; <span class="s2">&quot;0&quot;</span>
  ingress.#:                             <span class="s2">&quot;&quot;</span> <span class="o">=</span>&gt; <span class="s2">&quot;2&quot;</span>
  ingress.2541437006.cidr_blocks.#:      <span class="s2">&quot;&quot;</span> <span class="o">=</span>&gt; <span class="s2">&quot;1&quot;</span>
  ingress.2541437006.cidr_blocks.0:      <span class="s2">&quot;&quot;</span> <span class="o">=</span>&gt; <span class="s2">&quot;0.0.0.0/0&quot;</span>
...
...
...
aws_instance.Node: Creation <span class="nb">complete</span> after 1m13s <span class="o">(</span>ID: i-05a88fcd8cafae195<span class="o">)</span>

Apply complete! Resources: <span class="m">2</span> added, <span class="m">0</span> changed, <span class="m">0</span> destroyed.

Outputs:

<span class="nv">node_dns_name</span> <span class="o">=</span> ec2-34-240-28-230.eu-west-1.compute.amazonaws.com
</code></pre></div>

<p>After a while the resources have been created, we can see that Terraform has provided the public DNS name as mentioned, and we can ssh to the machine:</p>
<div class="highlight"><pre><span></span><code>$ ssh -i ~/.aws/mac-ssh.pem ubuntu@ec2-34-240-28-230.eu-west-1.compute.amazonaws.com
Welcome to Ubuntu <span class="m">16</span>.04.2 LTS <span class="o">(</span>GNU/Linux <span class="m">4</span>.4.0-1022-aws x86_64<span class="o">)</span>

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage

  Get cloud support with Ubuntu Advantage Cloud Guest:
    http://www.ubuntu.com/business/services/cloud

<span class="m">36</span> packages can be updated.
<span class="m">9</span> updates are security updates.


Last login: Mon Sep <span class="m">11</span> <span class="m">21</span>:08:07 <span class="m">2017</span> from <span class="m">141</span>.237.148.33
ubuntu@ip-172-31-45-252:~$
</code></pre></div>

<p>We are ready to start the Jupyter Notebook:</p>
<div class="highlight"><pre><span></span><code><span class="n">ubuntu</span><span class="nv">@ip</span><span class="o">-</span><span class="mi">172</span><span class="o">-</span><span class="mi">31</span><span class="o">-</span><span class="mi">45</span><span class="o">-</span><span class="mi">252</span><span class="err">:</span><span class="o">~</span><span class="err">$</span><span class="w"> </span><span class="n">jupyter</span><span class="w"> </span><span class="n">notebook</span><span class="w"></span>
<span class="o">[</span><span class="n">I 21:11:32.984 NotebookApp</span><span class="o">]</span><span class="w"> </span><span class="n">Writing</span><span class="w"> </span><span class="n">notebook</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="n">cookie</span><span class="w"> </span><span class="n">secret</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="o">/</span><span class="n">run</span><span class="o">/</span><span class="k">user</span><span class="o">/</span><span class="mi">1000</span><span class="o">/</span><span class="n">jupyter</span><span class="o">/</span><span class="n">notebook_cookie_secret</span><span class="w"></span>
<span class="o">[</span><span class="n">I 21:11:33.006 NotebookApp</span><span class="o">]</span><span class="w"> </span><span class="n">Serving</span><span class="w"> </span><span class="n">notebooks</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="k">local</span><span class="w"> </span><span class="nl">directory</span><span class="p">:</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">ubuntu</span><span class="w"></span>
<span class="o">[</span><span class="n">I 21:11:33.006 NotebookApp</span><span class="o">]</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">active</span><span class="w"> </span><span class="n">kernels</span><span class="w"></span>
<span class="o">[</span><span class="n">I 21:11:33.007 NotebookApp</span><span class="o">]</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">Jupyter</span><span class="w"> </span><span class="n">Notebook</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="k">at</span><span class="err">:</span><span class="w"> </span><span class="nl">http</span><span class="p">:</span><span class="o">//</span><span class="mf">0.0.0.0</span><span class="err">:</span><span class="mi">8888</span><span class="o">/</span><span class="vm">?</span><span class="n">token</span><span class="o">=</span><span class="mi">5</span><span class="n">cefea05e76d542e73d440f4f2085b536687ecd92adf5552</span><span class="w"></span>
<span class="o">[</span><span class="n">I 21:11:33.007 NotebookApp</span><span class="o">]</span><span class="w"> </span><span class="k">Use</span><span class="w"> </span><span class="n">Control</span><span class="o">-</span><span class="n">C</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">stop</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">shut</span><span class="w"> </span><span class="n">down</span><span class="w"> </span><span class="ow">all</span><span class="w"> </span><span class="n">kernels</span><span class="w"> </span><span class="p">(</span><span class="n">twice</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">skip</span><span class="w"> </span><span class="n">confirmation</span><span class="p">).</span><span class="w"></span>
<span class="o">[</span><span class="n">W 21:11:33.007 NotebookApp</span><span class="o">]</span><span class="w"> </span><span class="k">No</span><span class="w"> </span><span class="n">web</span><span class="w"> </span><span class="n">browser</span><span class="w"> </span><span class="k">found</span><span class="err">:</span><span class="w"> </span><span class="n">could</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">locate</span><span class="w"> </span><span class="n">runnable</span><span class="w"> </span><span class="n">browser</span><span class="p">.</span><span class="w"></span>
<span class="o">[</span><span class="n">C 21:11:33.007 NotebookApp</span><span class="o">]</span><span class="w"></span>

<span class="w">    </span><span class="n">Copy</span><span class="o">/</span><span class="n">paste</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">URL</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">browser</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="k">connect</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">first</span><span class="w"> </span><span class="nc">time</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">to</span><span class="w"> </span><span class="n">login</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="nl">token</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="nl">http</span><span class="p">:</span><span class="o">//</span><span class="mf">0.0.0.0</span><span class="err">:</span><span class="mi">8888</span><span class="o">/</span><span class="vm">?</span><span class="n">token</span><span class="o">=</span><span class="mi">5</span><span class="n">cefea05e76d542e73d440f4f2085b536687ecd92adf5552</span><span class="w"></span>
</code></pre></div>

<p>Once it has started Jupyter provides a URL to access it, however we need to substitute the wildcard 0.0.0.0 IP with the machine DNS name so in this case the URL to access the Notebook will be <code>http://ec2-34-240-28-230.eu-west-1.compute.amazonaws.com:8888/?token=5cefea05e76d542e73d440f4f2085b536687ecd92adf5552</code>.</p>
<p>Going to this URL confirms that everything is up and running!</p>
<p><img alt="jupyter" src="/images/AWS_jupyter.png"></p>
<hr>
<p>Once we are done with our work we can just destroy the VM. Terraform will ask to confirm the destruction of the VM and then proceed to destroy it.</p>
<div class="highlight"><pre><span></span><code>$ terraform destroy
aws_security_group.jupyter_notebook_sg: Refreshing state... <span class="o">(</span>ID: sg-a19bc7d9<span class="o">)</span>
aws_instance.Node: Refreshing state... <span class="o">(</span>ID: i-05a88fcd8cafae195<span class="o">)</span>

The Terraform destroy plan has been generated and is shown below.
Resources are shown <span class="k">in</span> alphabetical order <span class="k">for</span> quick scanning.
Resources shown <span class="k">in</span> red will be destroyed.

  - aws_instance.Node

  - aws_security_group.jupyter_notebook_sg


Do you really want to destroy?
  Terraform will delete all your managed infrastructure, as shown above.
  There is no undo. Only <span class="s1">&#39;yes&#39;</span> will be accepted to confirm.

  Enter a value: yes

aws_instance.Node: Destroying... <span class="o">(</span>ID: i-05a88fcd8cafae195<span class="o">)</span>
aws_instance.Node: Still destroying... <span class="o">(</span>ID: i-05a88fcd8cafae195, 10s elapsed<span class="o">)</span>
aws_instance.Node: Still destroying... <span class="o">(</span>ID: i-05a88fcd8cafae195, 20s elapsed<span class="o">)</span>
aws_instance.Node: Still destroying... <span class="o">(</span>ID: i-05a88fcd8cafae195, 30s elapsed<span class="o">)</span>
aws_instance.Node: Still destroying... <span class="o">(</span>ID: i-05a88fcd8cafae195, 40s elapsed<span class="o">)</span>
aws_instance.Node: Still destroying... <span class="o">(</span>ID: i-05a88fcd8cafae195, 50s elapsed<span class="o">)</span>
aws_instance.Node: Still destroying... <span class="o">(</span>ID: i-05a88fcd8cafae195, 1m0s elapsed<span class="o">)</span>
aws_instance.Node: Destruction <span class="nb">complete</span> after 1m3s
aws_security_group.jupyter_notebook_sg: Destroying... <span class="o">(</span>ID: sg-a19bc7d9<span class="o">)</span>
aws_security_group.jupyter_notebook_sg: Destruction <span class="nb">complete</span> after 1s

Destroy complete! Resources: <span class="m">2</span> destroyed.
</code></pre></div>

<h3>Conclusion</h3>
<p>Hope you liked this tutorial. I tried to summarize everything I learned along the way. Terraform is a very helpful tool that is being adopted by many tech companies. After this introduction I would encourage you to read more about it. Creating a single machine is just a very simple case but if you get the hang of you can create multi node architecture with big data systems like Hadoop, Spark etc.</p>
<p>If you have any remarks, bugs, suggestions etc feel free to contact me or leave a comment.</p>
  </div>
  <div class="tag-cloud">
    <p>
      <a href="https://tsaprailis.com/tag/devops.html">devops</a>
      <a href="https://tsaprailis.com/tag/terraform.html">terraform</a>
      <a href="https://tsaprailis.com/tag/aws.html">AWS</a>
      <a href="https://tsaprailis.com/tag/data-science.html">data science</a>
    </p>
  </div>





</article>

    <footer>
<p>&copy;  </p>
<p>
Built with <a href="http://getpelican.com" target="_blank">Pelican</a> using <a href="http://bit.ly/flex-pelican" target="_blank">Flex</a> theme
</p>    </footer>
  </main>




<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Kostis Tsaprailis ",
  "url" : "https://tsaprailis.com",
  "image": "/images/profile.png",
  "description": ""
}
</script>

</body>
</html>